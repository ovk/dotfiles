" Command to start vim
set vicmd=vim

" Perform file operations without using command-line utilities
set syscalls

" Disable trash
set notrash

" Number of directories to store in the directory history
set history=100

" Don't follow links on enter
set nofollowlinks

" Natural sort of (version) numbers within text
set sortnumbers

" Maximum number of changes that can be undone
set undolevels=100

" Use a plain text help file
set novimhelp

" Don't run executables on return
set norunexec

" Color scheme
colorscheme Default

" Format for displaying time
set timefmt="%b %e, %Y %H:%M:%S"

" Show list of matches on tab completion in command-line mode
set wildmenu

" One-line with left-to-right cursor
set wildstyle=bar

" Display suggestions in normal, visual and view modes for keys, marks and registers
set suggestoptions=normal,visual,view,otherpane,keys,marks,registers

" Ignore case in search patterns unless it contains at least one uppercase letter
set ignorecase
set smartcase

" Highlight search results automatically
set hlsearch

" Use increment searching (search while typing)
set incsearch

" Try to leave some space from cursor to upper/lower border
set scrolloff=3

" Set custom status line look
set statusline=" %t %= %21d %u:%g %A %10E "

" Set custom ruler format
set rulerformat="%l/%S (%L)"

" Appends / to folder names
set classify=:dir:/

" Customize columns
"set viewcolumns="-{name}..,{size}"

" Some permanent marks
mark h ~/
mark r /

" Exclude some folders from find
set findprg='find %s %a -print , -type d \( ! -readable -o ! -executable -o -path "*/.git" -o -path "*/node_modules" \) -prune'

" Some custom macros
command! run !! ./%f
command! reload :write | restart
command! df df -h %m 2> /dev/null
command! ps ps -Ao pid,user,pcpu,cmd --sort=-pcpu %m
command! diff vimdiff %f %F
command! zip zip -r %a.zip %f %m

"
" File associations
"
" Pdf
filextype *.pdf evince %c 2> /dev/null &
fileviewer *.pdf pdftotext -nopgbrk %c -

" Audio
filextype *.wav,*.mp3,*.flac,*.m4a,*.wma,*.ape,*.ac3,*.og[agx],*.spx,*.opus
       \ {Play using default Ubuntu video player}
       \ totem %c 2> /dev/null &
fileviewer *.wav,*.mp3,*.flac,*.m4a,*.wma,*.ape,*.ac3,*.og[agx],*.spx,*.opus file

" Video
filextype *.avi,*.mp4,*.wmv,*.dat,*.3gp,*.ogv,*.mkv,*.mpg,*.mpeg,*.vob,
         \*.fl[icv],*.m2v,*.mov,*.webm,*.mts,*.m4v,*.r[am],*.qt,*.divx,
         \*.as[fx]
        \ {Default Ubuntu video player}
        \ totem %c 2> /dev/null &
"fileviewer *.avi,*.mp4,*.wmv,*.dat,*.3gp,*.ogv,*.mkv,*.mpg,*.mpeg,*.vob,
"          \*.fl[icv],*.m2v,*.mov,*.webm,*.mts,*.m4v,*.r[am],*.qt,*.divx,
"          \*.as[fx]
"         \ ffprobe -pretty %c 2>&1

" Web
filextype *.html,*.htm
        \ {Open with firefox}
        \ firefox %f &

" Images
filextype *.bmp,*.jpg,*.jpeg,*.png,*.gif,*.xpm
        \ {Default Ubuntu viewer}
        \ eog %c 2> /dev/null &
fileviewer *.bmp,*.jpg,*.jpeg,*.png,*.gif,*.xpm
         \ convert -identify %f -verbose /dev/null

" FuseZipMount
filetype *.zip,*.jar,*.war,*.ear,*.oxt,*.apkg
       \ {Mount with fuse-zip}
       \ FUSE_MOUNT|fuse-zip %SOURCE_FILE %DESTINATION_DIR,
       \ {View contents}
       \ zip -sf %c | less
fileviewer *.zip,*.jar,*.war,*.ear,*.oxt zip -sf %c

" ArchiveMount
filetype *.tar,*.tar.bz2,*.tbz2,*.tgz,*.tar.gz,*.tar.xz,*.txz
       \ {Mount with archivemount}
       \ FUSE_MOUNT|archivemount %SOURCE_FILE %DESTINATION_DIR,
fileviewer *.tgz,*.tar.gz tar -tzf %c
fileviewer *.tar.bz2,*.tbz2 tar -tjf %c
fileviewer *.tar.txz,*.txz xz --list %c
fileviewer *.tar tar -tf %c

" IsoMount
filetype *.iso
       \ {Mount with fuseiso}
       \ FUSE_MOUNT|fuseiso %SOURCE_FILE %DESTINATION_DIR,

" SshMount
filetype *.ssh
       \ {Mount with sshfs}
       \ FUSE_MOUNT2|sshfs %PARAM %DESTINATION_DIR %FOREGROUND,

" Office files
filextype *.odt,*.doc,*.docx,*.xls,*.xlsx,*.odp,*.pptx libreoffice %f 2> /dev/null &

" Syntax highlighting in preview
fileviewer *.[ch],*.[ch]pp highlight -O xterm256 -s dusk --syntax c %c
fileviewer Makefile,Makefile.* highlight -O xterm256 -s dusk --syntax make %c
fileviewer *.lua highlight -O xterm256 -s dusk --syntax lua %c
fileviewer *.py highlight -O xterm256 -s dusk --syntax python %c
fileviewer *.go highlight -O xterm256 -s dusk --syntax go %c
fileviewer *.htm,*.html highlight -O xterm256 -s dusk --syntax html %c
fileviewer *.css highlight -O xterm256 -s dusk --syntax css %c
fileviewer *.js highlight -O xterm256 -s dusk --syntax js %c
fileviewer *.ts highlight -O xterm256 -s dusk --syntax ts %c
fileviewer *.json highlight -O xterm256 -s dusk --syntax json %c
fileviewer *.xml highlight -O xterm256 -s dusk --syntax xml %c
fileviewer *.md highlight -O xterm256 -s dusk --syntax markdown %c
fileviewer *.yaml highlight -O xterm256 -s dusk --syntax yaml %c
fileviewer *.sh highlight -O xterm256 -s dusk --syntax bash %c
fileviewer *.java highlight -O xterm256 -s dusk --syntax java %c
fileviewer Dockerfile highlight -O xterm256 -s dusk --syntax docker %c

" Open all other files with default system programs
filetype * xdg-open

" What to save in vifminfo
set vifminfo=dhistory,savedirs,chistory,state,tui,shistory,phistory,fhistory,registers,bmarks

"
" Mappings
"
" Start shell in the current directory
nnoremap s :shell<cr>

" Display sorting dialog
nnoremap S :sort<cr>

" Toggle preview window
nnoremap w :view<cr>

" Open file in new instance of gvim
nnoremap o :!gvim %f<cr>

" Some standard two-panel file managers mappings
nnoremap <f5> :copy<cr>
nnoremap <f6> :move<cr>
nnoremap <f8> :delete<cr>

" Generated with 'vifm-convert-dircolors .dircolors'
highlight BrokenLink cterm=bold ctermfg=red ctermbg=black
highlight Device cterm=bold ctermfg=yellow ctermbg=black
highlight Directory cterm=bold ctermfg=blue ctermbg=default
highlight Executable cterm=bold ctermfg=green ctermbg=default
highlight Fifo cterm=none ctermfg=yellow ctermbg=black
highlight Link cterm=bold ctermfg=cyan ctermbg=default
highlight Socket cterm=bold ctermfg=magenta ctermbg=default

highlight /.*\.aac$|.*\.au$|.*\.flac$|.*\.m4a$|.*\.mid$|.*\.midi$|.*\.mka$|.*\.mp3$|.*\.mpc$|.*\.oga$|.*\.ogg$|.*\.opus$|.*\.ra$|.*\.spx$|.*\.wav$|.*\.xspf$/I cterm=none ctermfg=cyan ctermbg=default
highlight /.*\.7z$|.*\.Z$|.*\.ace$|.*\.alz$|.*\.arc$|.*\.arj$|.*\.bz$|.*\.bz2$|.*\.cab$|.*\.cpio$|.*\.deb$|.*\.dwm$|.*\.dz$|.*\.ear$|.*\.esd$|.*\.gz$|.*\.jar$|.*\.lha$|.*\.lrz$|.*\.lz$|.*\.lz4$|.*\.lzh$|.*\.lzma$|.*\.lzo$|.*\.rar$|.*\.rpm$|.*\.rz$|.*\.sar$|.*\.swm$|.*\.t7z$|.*\.tar$|.*\.taz$|.*\.tbz$|.*\.tbz2$|.*\.tgz$|.*\.tlz$|.*\.txz$|.*\.tz$|.*\.tzo$|.*\.tzst$|.*\.war$|.*\.wim$|.*\.xz$|.*\.z$|.*\.zip$|.*\.zoo$|.*\.zst$/I cterm=bold ctermfg=red ctermbg=default
highlight /.*\.asf$|.*\.avi$|.*\.bmp$|.*\.cgm$|.*\.dl$|.*\.emf$|.*\.flc$|.*\.fli$|.*\.flv$|.*\.gif$|.*\.gl$|.*\.jpeg$|.*\.jpg$|.*\.m2v$|.*\.m4v$|.*\.mjpeg$|.*\.mjpg$|.*\.mkv$|.*\.mng$|.*\.mov$|.*\.mp4$|.*\.mp4v$|.*\.mpeg$|.*\.mpg$|.*\.nuv$|.*\.ogm$|.*\.ogv$|.*\.ogx$|.*\.pbm$|.*\.pcx$|.*\.pgm$|.*\.png$|.*\.ppm$|.*\.qt$|.*\.rm$|.*\.rmvb$|.*\.svg$|.*\.svgz$|.*\.tga$|.*\.tif$|.*\.tiff$|.*\.vob$|.*\.webm$|.*\.wmv$|.*\.xbm$|.*\.xcf$|.*\.xpm$|.*\.xwd$|.*\.yuv$/I cterm=bold ctermfg=magenta ctermbg=default

